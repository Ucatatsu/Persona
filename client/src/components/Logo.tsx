import { motion } from 'framer-motion'
import { useThemeStore } from '../store/themeStore'

interface LogoProps {
  size?: 'sm' | 'md' | 'lg'
  animated?: boolean
  className?: string
  noBackground?: boolean
}

export default function Logo({ size = 'md', animated = true, className = '', noBackground = false }: LogoProps) {
  const { accentColor } = useThemeStore()

  // Размеры в зависимости от пропса
  const sizes = {
    sm: { container: 'w-10 h-10', icon: 'w-[200%] h-[200%]', rounded: 'rounded-xl' },
    md: { container: 'w-14 h-14', icon: 'w-[200%] h-[200%]', rounded: 'rounded-xl' },
    lg: { container: 'w-32 h-32', icon: 'w-[400%] h-[400%]', rounded: 'rounded-3xl' }
  }

  const sizeClasses = sizes[size]

  // Конвертируем hex в RGB для градиента
  const hexToRgb = (hex: string) => {
    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex)
    return result ? {
      r: parseInt(result[1], 16),
      g: parseInt(result[2], 16),
      b: parseInt(result[3], 16)
    } : { r: 0, g: 217, b: 255 } // fallback to default cyan
  }

  const rgb = hexToRgb(accentColor)
  
  // Создаём более светлый оттенок для градиента
  const lighterRgb = {
    r: Math.min(255, rgb.r + 40),
    g: Math.min(255, rgb.g + 40),
    b: Math.min(255, rgb.b + 40)
  }

  const gradientStyle = {
    background: `linear-gradient(135deg, rgb(${lighterRgb.r}, ${lighterRgb.g}, ${lighterRgb.b}), rgb(${rgb.r}, ${rgb.g}, ${rgb.b}))`
  }

  const shadowStyle = {
    boxShadow: `0 10px 40px rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.5)`
  }

  const LogoContent = (
    <div className={`relative ${className}`}>
      <div 
        className={`${sizeClasses.container} ${sizeClasses.rounded} flex items-center justify-center overflow-hidden`}
        style={{ ...gradientStyle, ...shadowStyle }}
      >
        {/* Кастомное SVG лого с динамическим цветом */}
        <svg 
          className={sizeClasses.icon} 
          viewBox="100 50 824 924" 
          xmlns="http://www.w3.org/2000/svg"
          style={{ color: 'white' }}
        >
          <path d="M0 0 C1.15495715 -0.00763173 1.15495715 -0.00763173 2.33324677 -0.01541764 C4.92163069 -0.03115363 7.50998666 -0.03967036 10.09840393 -0.04811096 C11.95127541 -0.05764882 13.80414509 -0.06753995 15.65701294 -0.07775879 C21.75146873 -0.10916273 27.84593823 -0.12941807 33.94044495 -0.14796448 C35.49662407 -0.15291046 35.49662407 -0.15291046 37.08424115 -0.15795636 C46.87290514 -0.18874683 56.66157221 -0.21544979 66.45027065 -0.23237514 C78.96053634 -0.25426076 91.47037168 -0.29618095 103.98046535 -0.36581272 C112.78148736 -0.41313012 121.5823936 -0.43731935 130.38353878 -0.44457203 C135.63675407 -0.44951809 140.8894845 -0.46449882 146.14256096 -0.50431633 C151.09131096 -0.54133094 156.0393022 -0.54954386 160.9881649 -0.5363102 C162.79728489 -0.53636391 164.60643975 -0.54656206 166.41543198 -0.56806183 C179.3303313 -0.71325499 188.79110488 0.94296079 198.8818512 9.78562927 C207.11619319 18.6904083 209.99612091 28.85170419 209.79200745 40.64891052 C209.45125074 48.36987525 207.65359963 55.91099001 206.06690979 63.45213318 C205.34855084 66.92618468 204.69674031 70.41081031 204.04933167 73.89866638 C203.39893035 77.38721258 202.72193784 80.87042606 202.04542542 84.35398865 C201.67014463 86.30966767 201.30256645 88.26683382 200.94093323 90.2250824 C197.76091417 107.41466085 194.70540016 123.14354625 179.7959137 134.16453552 C170.32002127 140.38227863 162.36225761 143.31553387 150.9364624 143.30107117 C149.82348792 143.30552785 149.82348792 143.30552785 148.68802911 143.31007457 C146.21250444 143.31871619 143.7370284 143.32026594 141.26148987 143.32176208 C139.48212583 143.32639341 137.70276278 143.3314185 135.92340088 143.33680725 C131.0968599 143.34990149 126.27033281 143.3563702 121.44377685 143.36081791 C118.42615241 143.36375298 115.40853173 143.36785857 112.39090919 143.37232208 C102.94291425 143.38598814 93.49492795 143.3956596 84.04692382 143.39952397 C73.15235171 143.40400499 62.25790504 143.42155868 51.36337107 143.45052457 C42.93345261 143.47215745 34.5035694 143.48222909 26.07362348 143.48356509 C21.0425959 143.48461181 16.01168638 143.49049155 10.9806881 143.5083847 C6.24710368 143.52489352 1.51372575 143.52700725 -3.21987724 143.5182457 C-4.95283182 143.51747687 -6.68579763 143.52179757 -8.41872406 143.53170395 C-22.06791103 143.60512791 -33.32203268 142.17677842 -43.6806488 132.41062927 C-47.28020326 128.65790228 -49.61595685 124.99192857 -51.4931488 120.16062927 C-51.9056488 119.12937927 -52.3181488 118.09812927 -52.7431488 117.03562927 C-55.09905902 104.86342648 -52.63694799 93.89461782 -49.98924255 82.00828552 C-48.45095607 75.0956551 -47.12712492 68.14791413 -45.81495667 61.18998718 C-39.65613799 28.66802067 -39.65613799 28.66802067 -33.4931488 18.16062927 C-32.8331488 18.16062927 -32.1731488 18.16062927 -31.4931488 18.16062927 C-31.08709412 17.27504333 -31.08709412 17.27504333 -30.6728363 16.37156677 C-24.88350941 5.52137134 -11.72846509 0.01915695 0 0 Z " fill="currentColor" opacity="0.7" transform="translate(316.49314880371094,238.83937072753906)"/>
          <path d="M0 0 C1.5909981 -0.00571047 3.18199211 -0.01267734 4.77297974 -0.02079773 C9.07262747 -0.03866919 13.37207045 -0.03757218 17.67174411 -0.03185534 C21.27002322 -0.02875488 24.86826349 -0.03486543 28.46653706 -0.04089409 C36.95933262 -0.05491785 45.45202753 -0.05339585 53.94482422 -0.04199219 C62.68758981 -0.03051184 71.4300486 -0.0445901 80.17277378 -0.07138866 C87.69748728 -0.09358464 95.22210475 -0.10017431 102.74684864 -0.09431225 C107.23294843 -0.09095093 111.71885158 -0.09330269 116.20492363 -0.11056328 C120.42483933 -0.12609277 124.64430238 -0.12201083 128.86420059 -0.10325813 C130.40644943 -0.09958885 131.94873226 -0.10263192 133.49094963 -0.11314392 C146.45622298 -0.19472217 155.34090798 1.80283531 164.90454102 10.88452148 C175.69931432 22.86839202 174.95157208 35.19160788 174.41381836 50.53686523 C173.88148447 59.12359514 171.81390763 67.3529288 169.78930664 75.6862793 C168.8368375 79.89377391 168.22168838 84.13585474 167.61157227 88.40405273 C164.5533354 108.7396194 159.39771059 124.51020374 142.63891602 137.50952148 C132.35209874 143.13421864 121.87875764 143.99069147 110.40063477 143.92163086 C108.86317283 143.92706554 107.32571611 143.93419568 105.78826904 143.94287109 C101.65180181 143.96094775 97.5157382 143.95410252 93.37926483 143.94135475 C89.02651474 143.93114508 84.67379654 143.94064234 80.32104492 143.94689941 C73.01483022 143.95415283 65.70877787 143.944649 58.40258789 143.92553711 C49.98583526 143.90377278 41.56947037 143.9108258 33.15272713 143.93284273 C25.89368969 143.95106281 18.63476819 143.95352293 11.37571526 143.94308805 C7.05446911 143.93688926 2.7334045 143.93591685 -1.58782959 143.94923401 C-5.65270663 143.96088875 -9.71708945 143.95259374 -13.78191376 143.92965698 C-15.26323379 143.92442075 -16.74459627 143.92579506 -18.22589874 143.93470764 C-31.27157131 144.00589265 -43.01817268 142.55490707 -52.66186523 133.03686523 C-57.76850492 126.82409421 -61.51900924 119.53739295 -61.82592773 111.40405273 C-61.90842773 110.12530273 -61.99092773 108.84655273 -62.07592773 107.52905273 C-61.96898082 101.04806968 -60.58624622 94.73628735 -59.38256836 88.3894043 C-58.72329563 84.85362058 -58.09400138 81.31277137 -57.46655273 77.77124023 C-55.19494501 64.9801081 -52.89404203 52.1893537 -50.26342773 39.46655273 C-50.09020996 38.5814502 -49.91699219 37.69634766 -49.73852539 36.78442383 C-46.79385817 23.01166558 -39.05777077 12.43513888 -27.35717773 4.65795898 C-18.29028746 0.16649019 -9.90060144 -0.03218315 0 0 Z " fill="currentColor" opacity="0.85" transform="translate(606.825927734375,238.595947265625)"/>
          <path d="M0 0 C1.95135864 -0.00143509 1.95135864 -0.00143509 3.94213867 -0.00289917 C6.68881426 -0.00436611 9.43545715 -0.00225685 12.18212891 0.00244141 C15.65028797 0.00809365 19.11836961 0.00478371 22.58652592 -0.00099182 C71.67893468 -0.07077859 71.67893468 -0.07077859 85.0625 11.4453125 C93.76689273 21.56122838 95.07257606 31.03233412 94.375 44.1328125 C93.7607492 49.76762337 92.85782837 55.25039303 91.44921875 60.7421875 C90.0379984 66.27558775 89.07754372 71.89091388 88.0625 77.5078125 C87.62044925 79.92069348 87.17772323 82.33345083 86.734375 84.74609375 C86.50943359 85.97150879 86.28449219 87.19692383 86.05273438 88.45947266 C84.22546578 98.36332112 82.33459129 108.25430239 80.375 118.1328125 C80.19582031 119.04047363 80.01664063 119.94813477 79.83203125 120.88330078 C79.33966663 123.34466113 78.83011901 125.80165444 78.3125 128.2578125 C78.17448975 128.9494751 78.03647949 129.6411377 77.89428711 130.35375977 C74.97086906 143.7941701 66.06590889 154.10021307 54.94921875 161.703125 C48.11590885 165.49825614 42.41388493 166.57887113 34.72119141 166.55273438 C33.78998978 166.56120392 32.85878815 166.56967346 31.89936829 166.57839966 C28.84162484 166.60166994 25.78438755 166.60279417 22.7265625 166.6015625 C20.58718671 166.60867012 18.4478128 166.61637 16.30844116 166.62463379 C11.83155006 166.63805577 7.35483524 166.63965761 2.87792969 166.63378906 C-2.84054985 166.6278955 -8.55817967 166.65848173 -14.27649498 166.69890594 C-18.69306951 166.72483763 -23.10944092 166.72765537 -27.52608109 166.72401428 C-29.63348144 166.72570042 -31.7408917 166.73529387 -33.84821701 166.75315857 C-46.23314257 166.84660325 -55.32261688 166.79775317 -65.4296875 158.95703125 C-75.25472478 148.81685127 -77.01789313 140.08013426 -76.83984375 126.32421875 C-76.60537996 118.43837128 -75.20642667 110.8445224 -73.625 103.1328125 C-73.43744141 102.21338867 -73.24988281 101.29396484 -73.05664062 100.34667969 C-72.01741162 95.28338109 -70.95659464 90.22486992 -69.88671875 85.16796875 C-68.70206794 79.54155203 -67.57823181 73.90554352 -66.5 68.2578125 C-66.33636963 67.40219727 -66.17273926 66.54658203 -66.00415039 65.66503906 C-65.0777655 60.74753021 -64.24994602 55.82349428 -63.4855957 50.87841797 C-60.82687554 33.86044881 -55.67148174 18.97224419 -41.27734375 8.41015625 C-28.62978863 0.25238298 -14.60420821 -0.0239464 0 0 Z " fill="currentColor" opacity="0.9" transform="translate(320.625,586.8671875)"/>
          <path d="M0 0 C2.08545602 -0.00456909 4.17091054 -0.00987681 6.25636292 -0.0158844 C10.61278425 -0.02478491 14.96902197 -0.02242713 19.32543945 -0.01245117 C24.88099198 -0.00096267 30.43590874 -0.02118726 35.99137783 -0.05036831 C40.29392964 -0.06879962 44.59633101 -0.06842411 48.89891243 -0.06273079 C50.94603429 -0.06257844 52.99316691 -0.06855072 55.04025078 -0.08102226 C68.27782003 -0.15032525 81.04454456 -0.20028201 91.81640625 8.6640625 C99.57152858 16.50573754 102.01687852 24.88440343 102.00024414 35.68676758 C101.82822767 43.02066499 100.45756078 49.91484618 98.83984375 57.05004883 C97.33162804 63.71426982 95.99885344 70.38490689 94.81640625 77.11328125 C94.66651749 77.96543716 94.51662872 78.81759308 94.36219788 79.6955719 C93.76065793 83.13096623 93.16270906 86.5669125 92.57516479 90.00473022 C86.16232343 127.4793508 86.16232343 127.4793508 71.56640625 139.43359375 C62.89436387 145.26558022 54.66999628 147.8846262 44.30175781 147.86938477 C43.30549377 147.8794606 42.30922974 147.88953644 41.28277588 147.8999176 C38.00741174 147.92828392 34.73251039 147.93426868 31.45703125 147.9375 C29.16550512 147.94714962 26.87398082 147.95724273 24.5824585 147.96775818 C19.78442097 147.98569176 14.98654522 147.99128211 10.18847656 147.98950195 C4.06429781 147.98919743 -2.05883481 148.03013408 -8.18276596 148.08181858 C-12.91510711 148.11530753 -17.64719883 148.12125565 -22.3796463 148.11967278 C-24.63612724 148.1231945 -26.8926159 148.1363601 -29.14897919 148.15966988 C-53.89323167 148.39135261 -53.89323167 148.39135261 -63.89764404 139.15992737 C-70.81341505 132.0286734 -73.61073707 124.50689047 -73.55566406 114.59375 C-73.07735282 106.1295543 -71.06883993 97.73177521 -69.43359375 89.43359375 C-69.10360724 87.69957196 -68.77539817 85.9652107 -68.44921875 84.23046875 C-67.80920156 80.83138312 -67.15789276 77.43473033 -66.5 74.0390625 C-65.70392276 69.90140797 -64.94977796 65.75762625 -64.2109375 61.609375 C-56.86689519 20.51380903 -56.86689519 20.51380903 -40.9296875 8.5546875 C-27.98444192 -0.26575721 -15.12431247 -0.02910576 0 0 Z " fill="currentColor" opacity="0.65" transform="translate(339.43359375,410.56640625)"/>
          <path d="M0 0 C1.97574979 -0.00202492 3.95149884 -0.00493983 5.92724609 -0.00869751 C10.05248179 -0.01310116 14.17752159 -0.00675322 18.30273438 0.00732422 C23.56460163 0.02441481 28.82600966 0.01456308 34.08786011 -0.00339317 C38.16303913 -0.01428413 42.23811103 -0.01076039 46.31329346 -0.0030098 C48.25238094 -0.00102245 50.19147846 -0.00341497 52.1305542 -0.01044846 C78.00799254 -0.08373543 78.00799254 -0.08373543 88.625 9.3984375 C89.3675 10.0378125 90.11 10.6771875 90.875 11.3359375 C98.44705405 20.26014405 99.57824425 30.19736106 98.92822266 41.47265625 C97.95480505 50.8651173 95.47793722 60.09902365 93.33837891 69.27929688 C91.69164709 76.47938096 90.4358757 83.75699188 89.16503906 91.03125 C88.82652418 92.96863732 88.48580963 94.9056414 88.14306641 96.84228516 C87.80913526 98.73162416 87.48029266 100.62187309 87.15771484 102.51318359 C84.27466036 118.81456645 78.61560111 130.80736945 64.84765625 140.671875 C53.72917054 147.630739 41.4723488 146.84133726 28.875 146.796875 C26.85058487 146.79889919 24.82617046 146.80181349 22.80175781 146.80557251 C18.57219456 146.8099796 14.3428222 146.80361697 10.11328125 146.78955078 C4.7134074 146.77246 -0.68601899 146.78230986 -6.08587646 146.80026817 C-10.26224083 146.81114973 -14.43850051 146.80763965 -18.61486816 146.7998848 C-20.60502171 146.79789486 -22.595185 146.80029926 -24.58532715 146.80732346 C-50.81306116 146.8795967 -50.81306116 146.8795967 -61.375 136.3984375 C-68.49873176 127.62724743 -71.15949006 118.3250114 -70.16748047 107.03710938 C-69.02713471 97.18542379 -67.2926215 87.42523304 -65.25390625 77.72265625 C-64.28200088 73.04442936 -63.43984927 68.3434355 -62.58544922 63.64257812 C-61.53750372 57.8903287 -60.4626659 52.14329893 -59.375 46.3984375 C-59.1982373 45.46306152 -59.02147461 44.52768555 -58.83935547 43.56396484 C-55.49183319 26.19807946 -55.49183319 26.19807946 -50.375 19.3984375 C-49.81039062 18.64433594 -49.24578125 17.89023437 -48.6640625 17.11328125 C-35.4810763 0.99775322 -19.35855191 -0.07021808 0 0 Z " fill="currentColor" opacity="0.6" transform="translate(658.375,410.6015625)"/>
          <path d="M0 0 C1.68714502 -0.0038947 3.37428907 -0.00823095 5.06143188 -0.01298523 C8.58655993 -0.02041745 12.11158777 -0.02017809 15.63671875 -0.01489258 C20.12739522 -0.00910288 24.61765857 -0.02603145 29.10826683 -0.04923725 C32.58981679 -0.06405461 36.07126909 -0.06483546 39.552845 -0.06172752 C41.20724938 -0.06223675 42.8616598 -0.06739862 44.51603317 -0.07753944 C58.40021316 -0.15221247 69.5714134 0.7934637 80.2890625 10.42578125 C86.44299389 16.85201048 88.327266 24.71027805 88.76953125 33.421875 C88.42593216 46.05868595 85.74612492 58.6970196 83.12939453 71.02685547 C82.55732541 73.82237058 82.03107348 76.62536208 81.50390625 79.4296875 C81.29362793 80.52958008 81.08334961 81.62947266 80.86669922 82.76269531 C80.45090127 84.93905345 80.04197419 87.11673961 79.64111328 89.29589844 C77.8982192 98.29065466 75.41850592 107.01181959 69.6640625 114.30078125 C69.0040625 114.30078125 68.3440625 114.30078125 67.6640625 114.30078125 C67.42300781 114.88859375 67.18195313 115.47640625 66.93359375 116.08203125 C62.88341866 123.16049111 53.91636675 126.33005085 46.4944458 128.49780273 C39.14291493 130.03893345 31.76363312 129.87325097 24.28125 129.83203125 C22.53256007 129.83473362 20.78387162 129.8386222 19.03518677 129.84362793 C15.3926139 129.84948489 11.7504366 129.84108204 8.10791016 129.82226562 C3.46697551 129.79944403 -1.17303513 129.81264346 -5.81393623 129.83655548 C-9.41733624 129.85108807 -13.02052119 129.8463741 -16.62392807 129.83604431 C-18.33414701 129.83339935 -20.04438627 129.83656711 -21.75458145 129.84596252 C-33.49362674 129.89633762 -43.25918673 128.86569147 -53.3359375 122.30078125 C-58.37842169 116.77806047 -61.47848435 111.93703465 -63.0859375 104.61328125 C-63.34890625 103.47503906 -63.611875 102.33679688 -63.8828125 101.1640625 C-65.06152819 91.11449511 -62.28541622 80.79795559 -60.48950195 70.92749023 C-60.03031147 68.4011007 -59.57814837 65.87353129 -59.12695312 63.34570312 C-58.22549371 58.32515565 -57.28799879 53.31195481 -56.3359375 48.30078125 C-56.17482483 47.44184265 -56.01371216 46.58290405 -55.84771729 45.69793701 C-55.36376324 43.14474885 -54.86228675 40.59561266 -54.35546875 38.046875 C-54.14104378 36.9044912 -54.14104378 36.9044912 -53.92228699 35.73902893 C-51.43866982 23.57321765 -44.2353572 13.65517056 -34.3359375 6.30078125 C-23.75994666 -0.42177927 -12.06295688 -0.01164207 0 0 Z " fill="currentColor" opacity="0.75" transform="translate(491.3359375,511.69921875)"/>
        </svg>
      </div>
      
      {animated && (
        <motion.div
          className={`absolute inset-0 ${sizeClasses.rounded} blur-xl opacity-50`}
          style={gradientStyle}
          animate={{ scale: [1, 1.2, 1] }}
          transition={{ duration: 2, repeat: Infinity }}
        />
      )}
    </div>
  )

  if (animated) {
    return (
      <motion.div
        whileHover={{ scale: 1.05 }}
        transition={{ type: 'spring', stiffness: 300 }}
      >
        {LogoContent}
      </motion.div>
    )
  }

  return LogoContent
}
